//
//  UploadWorksCellB.m
//  IDLook
//
//  Created by HYH on 2018/5/18.
//  Copyright © 2018年 HYH. All rights reserved.
//

#import "UploadWorksCellB.h"

@interface UploadWorksCellB ()
@property(nonatomic,strong)UILabel *desc;
@property(nonatomic,assign)NSInteger type;
@end

@implementation UploadWorksCellB

-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if (self=[super initWithStyle:style reuseIdentifier:reuseIdentifier]) {
        self.contentView.layer.borderColor=Public_LineGray_Color.CGColor;
        self.contentView.layer.borderWidth=0.5;
    }
    return self;
}

-(AddSubButton*)addBtn
{
    if (!_addBtn) {
        _addBtn=[[AddSubButton alloc]init];
        [self.contentView addSubview:_addBtn];
        [_addBtn mas_makeConstraints:^(MASConstraintMaker *make) {
            make.top.mas_equalTo(self.contentView).offset(20);
            make.centerX.mas_equalTo(self.contentView);
            make.size.mas_equalTo(CGSizeMake(120, 120));
        }];
        WeakSelf(self);
        _addBtn.addAction = ^{
            [weakself addACtion];
        };

    }
    return _addBtn;
}

-(UILabel*)desc
{
    if (!_desc) {
        _desc=[[UILabel alloc]init];
        _desc.font=[UIFont systemFontOfSize:12.0];
        _desc.numberOfLines=0;
        _desc.textAlignment=NSTextAlignmentCenter;
        _desc.text=@"*要求：视频时长60S 大小50M以内";
        _desc.textColor=[UIColor colorWithHexString:@"#CCCCCC"];
        [self.contentView addSubview:_desc];
        [_desc mas_makeConstraints:^(MASConstraintMaker *make) {
            make.left.mas_equalTo(self.contentView).offset(31);
            make.right.mas_equalTo(self.contentView).offset(-31);
            make.top.mas_equalTo(self.contentView.mas_bottom).offset(-50);
        }];
    }
    return _desc;
}



//添加按钮事件
-(void)addACtion
{
    if (self.delegate && [self.delegate respondsToSelector:@selector(addVideoAndPhotoWithType:)]) {
        [self.delegate addVideoAndPhotoWithType:self.type];
    }
}


-(void)reloadUIType:(NSInteger)type withImage:(UIImage *)image
{
    self.type=type;
    [self desc];
    if (type==1) {
        self.addBtn.imageN=@"works_video_icon";
        self.addBtn.title=@"添加视频";
    }
    else if(type==2)
    {
        self.addBtn.imageN=@"works_photo_icon";
        self.addBtn.title=@"添加图片/视频";
    }

    
    CGImageRef cgref = [image CGImage];
    CIImage *cim = [image CIImage];
    if (cim == nil && cgref == NULL)   //判断图片是空
    {
        self.desc.hidden=NO;
        [self.addBtn mas_remakeConstraints:^(MASConstraintMaker *make) {
            make.top.mas_equalTo(self.contentView).offset(20);
            make.centerX.mas_equalTo(self.contentView);
            make.size.mas_equalTo(CGSizeMake(120, 120));
        }];
    }
    else
    {
        self.addBtn.iconImage=image;
        self.desc.hidden=YES;
        [self.addBtn mas_remakeConstraints:^(MASConstraintMaker *make) {
            make.left.mas_equalTo(self.contentView).offset(15);
            make.centerX.mas_equalTo(self.contentView);
            make.top.mas_equalTo(self.contentView).offset(10);
            make.centerY.mas_equalTo(self.contentView);
        }];
    }
}
@end
