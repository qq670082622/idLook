//
//  UploadWorksVCM.m
//  IDLook
//
//  Created by HYH on 2018/6/25.
//  Copyright © 2018年 HYH. All rights reserved.
//

#import "UploadWorksVCM.h"

NSString * const UploadWorksVCMCellClass =  @"UploadWorksVCMCellClass";
NSString * const UploadWorksVCMCellHeight = @"UploadWorksVCMCellHeight";
NSString * const UploadWorksVCMCellType =   @"UploadWorksVCMCellType";
NSString * const UploadWorksVCMCellData =   @"UploadWorksVCMCellData";

@implementation UploadWorksVCM

- (NSMutableArray *)ds
{
    if(!_ds)
    {
        _ds = [[NSMutableArray alloc]initWithCapacity:0];
    }
    return _ds;
}

-(void)refreshDataWithType:(WorkTypes)type
{
    [self.ds removeAllObjects];
    
    if (type==WorkTypesPerformance) {
        [self.ds addObject:@{UploadWorksVCMCellData:@[],
                             UploadWorksVCMCellClass:@"UploadWorksCellC",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:212],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
        
        [self.ds addObject:@{UploadWorksVCMCellData:@{@"title":@"作品类型",@"content":@"",@"placeholder":@"请选择作品类型",@"isEdit":@(NO)},
                             UploadWorksVCMCellClass:@"UploadWorksCellA",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:48],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
        
        [self.ds addObject:@{UploadWorksVCMCellData:@{@"title":@"作品关键词",@"content":@"",@"placeholder":@"请选择作品关键词",@"isEdit":@(NO)},
                             UploadWorksVCMCellClass:@"UploadWorksCellA",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:48],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
    }
    
    else if (type==WorkTypesTalentshow || type ==WorkTypesPastworks)
    {
        [self.ds addObject:@{UploadWorksVCMCellData:[[UIImage alloc]init],
                             UploadWorksVCMCellClass:@"UploadWorksCellB",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:212],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
        
        [self.ds addObject:@{UploadWorksVCMCellData:@{@"title":@"作品标题",@"content":@"",@"placeholder":@"请输入作品标题",@"isEdit":@(YES)},
                             UploadWorksVCMCellClass:@"UploadWorksCellA",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:48],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
        
        [self.ds addObject:@{UploadWorksVCMCellData:@{@"title":@"作品类型",@"content":@"",@"placeholder":@"请选择作品类型",@"isEdit":@(NO)},
                             UploadWorksVCMCellClass:@"UploadWorksCellA",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:48],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
        
        [self.ds addObject:@{UploadWorksVCMCellData:@{@"title":@"作品关键词",@"content":@"",@"placeholder":@"请选择作品关键词",@"isEdit":@(NO)},
                             UploadWorksVCMCellClass:@"UploadWorksCellA",
                             UploadWorksVCMCellHeight:[NSNumber numberWithFloat:48],
                             UploadWorksVCMCellType:[NSNumber numberWithInteger:0]}];
    }

}

//添加图片时改变高度
-(void)changeHeightWithPhotos:(NSArray*)photos
{
    CGFloat height =0.0;

    if (photos.count<6) {
       height=10+70+(UploadSubCellAWidth+10)*((photos.count)/3+1);
    }
    else
    {
        height = 10+70+(UploadSubCellAWidth+10)*2;
    }

    NSDictionary *dicA =@{UploadWorksVCMCellData:photos,
                          UploadWorksVCMCellClass:@"UploadWorksCellC",
                          UploadWorksVCMCellHeight:[NSNumber numberWithFloat:height],
                          UploadWorksVCMCellType:[NSNumber numberWithInteger:0]};
    
    [self.ds replaceObjectAtIndex:0 withObject:dicA];
}

//微出镜添加单张图片，视频时改变数据源
-(void)addVideoOrPhotoChangeData:(UIImage*)image withTime:(NSString *)time withType:(NSInteger)type
{
    NSDictionary *dicA ;
    if (type==0) {
        
        dicA =@{UploadWorksVCMCellData:image,
                UploadWorksVCMCellClass:@"UploadWorksCellB",
                UploadWorksVCMCellHeight:[NSNumber numberWithFloat:(UI_SCREEN_WIDTH-30)/1.4+20],
                UploadWorksVCMCellType:[NSNumber numberWithInteger:0]};
    }
    else
    {
        dicA =@{UploadWorksVCMCellData:@{@"image":image,@"time":time},
                UploadWorksVCMCellClass:@"UploadVideoCell",
                UploadWorksVCMCellHeight:[NSNumber numberWithFloat:243],
                UploadWorksVCMCellType:[NSNumber numberWithInteger:0]};
    }
    
    [self.ds replaceObjectAtIndex:0 withObject:dicA];
}


@end
